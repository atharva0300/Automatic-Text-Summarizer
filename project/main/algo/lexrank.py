# -*- coding: utf-8 -*-
"""lexrank.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1DtXQLy7AWV7xnOYLEk-vwb0wrO47ab-E
"""


import sumy
import numpy
import os


from sumy.parsers.plaintext import PlaintextParser
from sumy.nlp.tokenizers import Tokenizer
from sumy.summarizers.lex_rank import LexRankSummarizer

import nltk
nltk.download('punkt')



def execute(document_text , isText ) : 
    directory  = "/home/atharva007/Documents/GitHub/Automatic-Text-Summarizer/project/main/documents/one.txt"
    # opening the file 
    file1 = open(directory , "r")

    # reading the file 
    document = file1.read()

    # printing the document 
    print(document)


    parser = PlaintextParser.from_string(document_text,Tokenizer("english"))

    # Using LexRank
    summarizer = LexRankSummarizer()
    #Summarize the document with 2 sentences

    # number of sentences 
    numberOfSentences = len(document_text.split('.'))/2
    summary = summarizer(parser.document , numberOfSentences)

    print()
    print()
    print("The output of the Algorithm is : ")

    print("Sumary : " , summary)
    print("summary type : " , type(summary))

    file = "output2.txt"

    directory = os.getcwd()
    print("current working drectory : " , directory)

    print('file : ' , os.path.join(directory , file))

    output_text = ""

    with open(os.path.join(directory , file) ,  'w') as file2 : 
        for sentence in summary:
            print(sentence)
            output_text = output_text + str(sentence)

            # writing into the file2
            file2.write(str(sentence))


    return output_text